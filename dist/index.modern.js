import e,{createContext as t,useState as o,createElement as i,useContext as n,Fragment as r}from"react";import{ThemeUIProvider as a,Button as l,Image as d}from"theme-ui";import s from"tinycolor2";import{motion as c}from"framer-motion";function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}var h=t({isOpen:!1,toggle:function(){return null}}),p=function(e){var t,n,r,l=e.children,d=e.primaryColor,c=o(!1),g=c[0],p=c[1],u={useBodyStyles:!1,space:[0,4,8,16,32,64,128,256,512],fonts:{body:'-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;',heading:'-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;',monospace:'"Roboto Mono", monospace'},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:600,bold:600},lineHeights:{body:1.5,heading:1.125},colors:{text:"#141414",background:"#fff",primary:(r={primary:(n=s(void 0===(t=d||"1890ff")?"#1890ff":t)).toString(),light:n.lighten().toString(),dark:n.darken().toString()}).primary,darker:r.dark,lighter:r.light,secondary:"#722ed1",green:"#52c41a",red:"#ff4d4f",muted:"#f0f0f0",gray:"rgba(0, 0, 0, 0.45)",input:"rgba(0, 0, 0, 0.65)",offset:"rgba(255, 255, 255, 0.8)"},text:{default:{color:"text",fontSize:1},caps:{textTransform:"uppercase",letterSpacing:"0.2em"},heading:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading"}},buttons:{primary:{cursor:"pointer",outline:0,transition:"0.2s",background:r.primary,borderColor:r.primary,"&:hover":{background:r.light,borderColor:r.light},"&:active":{background:r.dark,borderColor:r.dark}},secondary:{cursor:"pointer",outline:0,transition:"0.2s",background:n.lighten(40).toString(),color:r.primary,borderColor:r.primary,borderWidth:1,borderStyle:"solid","&:hover":{color:"#fff",background:r.primary,borderColor:r.primary},"&:active":{background:r.dark,borderColor:r.dark}},link:{cursor:"pointer",outline:0,transition:"0.2s",backgroundColor:"background","&:hover":{backgroundColor:"offset",borderColor:"offset"},"&:active":{backgroundColor:"offset",borderColor:"offset"}}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",fontSize:1},h1:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:5},h2:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:4},h3:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:3},h4:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:2},h5:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:1},h6:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:0},p:{color:"text",fontFamily:"body",fontWeight:"body",lineHeight:"body"},a:{color:"primary",userSelect:"none","&:hover":{color:r.light},"&:active":{color:r.dark}},pre:{fontFamily:"monospace",overflowX:"auto",code:{color:"inherit"}},code:{fontFamily:"monospace",fontSize:"inherit"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0},th:{textAlign:"left",borderBottomStyle:"solid"},td:{textAlign:"left",borderBottomStyle:"solid"},img:{maxWidth:"100%"},input:{transparent:{border:"none",boxShadow:"none",resize:"none",outline:0,"&:hover":{border:"none",boxShadow:"none",resize:"none",outline:0},"&:active":{border:"none",boxShadow:"none",resize:"none",outline:0},"&:focus":{border:"none",boxShadow:"none",resize:"none",outline:0},"&:disabled":{opacity:.8,cursor:"not-allowed"}}},WidgetContainer:{margin:0,zIndex:2147483e3,position:"fixed",bottom:100,right:20,width:376,maxWidth:["90%","376px"],minHeight:250,maxHeight:["60%","704px"],boxShadow:"rgba(0, 0, 0, 0.16) 0px 5px 40px",height:"calc(100% - 120px)",borderRadius:8,overflow:"hidden"},WidgetToggleContainer:{position:"fixed",zIndex:2147483003,bottom:"20px",right:"20px"},WidgetToggle:{outline:"none",border:"none",userSelect:"none",cursor:"pointer",width:"50px",height:"50px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"}}};return i(a,{theme:u},i(h.Provider,{value:{isOpen:g,toggle:function(){p(!g)}}},l))},u=function(t){return e.createElement(c.path,Object.assign({fill:"transparent",strokeWidth:"3",stroke:"hsl(0, 0%, 99%)",strokeLinecap:"round"},t))},f=function(){return e.createElement("svg",{width:"27",height:"27",viewBox:"0 0 27 27"},e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 14.5 L 19 14.5"},open:{opacity:1,d:"M 7 7 L 20 20"}},transition:{duration:.2}}),e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 8.5 L 19 8.5"},open:{opacity:1,d:"M 7 20 L 20 7"}},transition:{duration:.2}}),e.createElement(u,{d:"M22 21.6453C22 20 23 19.5 23 19.5C23 19.5 25.5 18 25.5 14V9C25.5 4 23 1.5 18 1.5H9C4 1.5 1.5 4 1.5 9V14C1.5 19 4 21 9 21H13.5C14 21 14 21 15 21.5L20.25 24.8572L20.8517 25.2118C21.5184 25.6046 22 25.631 22 24.8572V24.0287V22.7858V21.6453Z",variants:{closed:{opacity:1},open:{opacity:0}},transition:{duration:.2}}))},m=function(){return e.createElement("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none"},e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 14.5 L 19 14.5"},open:{opacity:1,d:"M 5 5 L 20 20"}},transition:{duration:.2}}),e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 8.5 L 19 8.5"},open:{opacity:1,d:"M 5 20 L 20 5"}},transition:{duration:.2}}),e.createElement(c.path,{d:"M20.5 21.1453C20.5 19.5 21.5 19 21.5 19C21.5 19 24 18.5 24 13.5V8.5C24 3.5 21.5 1 16.5 1H7.5C2.5 1 0 3.5 0 8.5V13.5C0 18.5 2.5 20.5 7.5 20.5H12C12.5 20.5 12.5 20.5 13.5 21L18.75 24.3572L19.3517 24.7118C20.0184 25.1046 20.5 25.131 20.5 24.3572V23.5287V22.2858V21.1453Z",fill:"white",fillOpacity:"0.7",variants:{closed:{opacity:1},open:{opacity:0}},transition:{duration:.2}}),e.createElement(c.path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5 18C21.5 18 20.5 18.5 20.5 20.1453V21.2858V22.5287V23.3572C20.5 24.131 20.0184 24.1046 19.3517 23.7118L18.75 23.3572L13.5 20C12.8174 19.6587 12.6007 19.5504 12.3729 19.516C12.267 19.5 12.1587 19.5 12 19.5H7.5C2.5 19.5 0 17.5 0 12.5V7.5C0 2.5 2.5 0 7.5 0H16.5C21.5 0 24 2.5 24 7.5V12.5C24 17.5 21.5 18 21.5 18ZM21 17.557C21.8581 17.557 24 13.557 23 13.057C22.3869 12.7505 21.8801 13.7414 21.4646 14.554C21.2023 15.0668 20.9764 15.5086 20.783 15.5086C20.283 15.5086 20 16.0554 20 16.7568C20 17.4582 20.1419 17.557 21 17.557Z",fill:"white",variants:{closed:{opacity:1},open:{opacity:0}},transition:{duration:.2}}))},y=function(){return e.createElement("svg",{width:"27",height:"27",viewBox:"0 0 27 27"},e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 14.5 L 19 14.5"},open:{opacity:1,d:"M 7 7 L 20 20"}},transition:{duration:.2}}),e.createElement(u,{variants:{closed:{opacity:0,d:"M 7.5 8.5 L 19 8.5"},open:{opacity:1,d:"M 7 20 L 20 7"}},transition:{duration:.2}}))},b=function(t){var o=t.customIconUrl,i=t.iconVariant;return o?t.isOpen?e.createElement(y,null):e.createElement(d,{src:o,style:{maxHeight:40,maxWidth:40}}):e.createElement("filled"===i?m:f,null)},v=function(t){var o=t.isOpen;return e.createElement(l,{className:"Papercups-toggleButton",variant:"primary",p:0,style:t.style,sx:{variant:"styles.WidgetToggle"},disabled:t.isDisabled,onClick:t.toggle,"aria-label":(o?"Close":"Open")+" chat widget"},e.createElement(b,{customIconUrl:t.customIconUrl,iconVariant:t.iconVariant,isOpen:o}))},C=["allow-scripts","allow-popups","allow-same-origin","allow-forms"].join(" ");function x(e){var t=e.title,o=e.query,a=e.styles,l=e.position,d=function(){var e=n(h);if(void 0===e)throw new Error("useChatContext must be used within a ChatProvider");return e}(),s=d.isOpen,p=d.toggle,u=function(e,t){void 0===e&&(e={});var o=e.chatContainer,i=void 0===o?{}:o,n=e.toggleContainer,r=void 0===n?{}:n,a=e.toggleButton,l=void 0===a?{}:a,d=t.side,s=t.offset,c=void 0===s?20:s;switch(void 0===d?"right":d){case"left":return{chatContainer:g({left:c,right:"auto"},i),toggleContainer:g({left:c,right:"auto"},r),toggleButton:l};case"right":default:return{chatContainer:g({right:c,left:"auto"},i),toggleContainer:g({right:c,left:"auto"},r),toggleButton:l}}}(a,function(e){if(!e)return{side:"right",offset:20};switch(e){case"left":return{side:"left",offset:20};case"right":return{side:"right",offset:20};default:return e}}(l)),f=u.chatContainer,m=u.toggleContainer,y=void 0===m?{}:m,b=u.toggleButton,x=void 0===b?{}:b;return i(r,null,i(c.iframe,{className:"chatWindowContainer",title:t||"Welcome to Chat Widget",sandbox:C,animate:"open",initial:"closed",variants:{closed:{opacity:0,y:4},open:{opacity:1,y:0}},transition:{duration:.2,ease:"easeIn"},src:"https://chat-widget-nu.vercel.app?"+o,style:s?g({border:"none",margin:0,zIndex:2147483e3,position:"fixed",bottom:100,right:20,width:376,maxWidth:["90%","376px"],minHeight:250,maxHeight:["60%","704px"],boxShadow:"rgba(0, 0, 0, 0.16) 0px 5px 40px",height:"calc(100% - 120px)",borderRadius:8,overflow:"hidden"},void 0===f?{}:f):{pointerEvents:"none",height:0,minHeight:0,border:"none"}},"Loading..."),i(c.div,{className:"toggleButtonContainer",style:g({position:"fixed",zIndex:2147483003,bottom:"20px",right:"20px"},y),initial:!1,animate:s?"open":"closed"},i(v,{style:g({outline:"none !important",border:"none !important",userSelect:"none !important",cursor:"pointer",width:"50px",height:"50px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},x),isOpen:s,iconVariant:"filled",toggle:p})))}var w=function(e){var t=e.companyName,o=e.customerId,n=e.showAgentAvailability,r=e.title,a=void 0===r?"Welcome":r,l=e.subtitle,d=e.primaryColor,s=void 0===d?"1890ff":d,c=e.position,g=void 0===c?"right":c,h=e.styles,u=void 0===h?{}:h,f=function(e){var t=[];for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];t.push(encodeURIComponent(o)+"="+encodeURIComponent(i))}return t.join("&")}({title:a,companyName:void 0===t?"":t,customerId:void 0===o?"":o,showAgentAvailability:void 0!==n&&n,subtitle:void 0===l?"Hi, how can I help you today?":l,primaryColor:s,isMoblie:"undefined"!=typeof window&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)});return i(p,{primaryColor:s},i(x,{title:a,query:f,position:g,styles:u}))},S={};export default w;export{w as ChatWidget,S as ChatWidgetSDK};
//# sourceMappingURL=index.modern.js.map
